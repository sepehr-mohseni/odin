{{define "add_service.html"}}
{{template "base" .}}
{{end}}

{{define "title"}}Add Service - Odin Admin{{end}}

{{define "content"}}
<div class="row">
  <div class="col-12">
    <h2>Add New Service</h2>

    <div id="form-messages"></div>

    <form
      hx-post="/admin/services"
      hx-target="#form-messages"
      hx-swap="innerHTML"
    >
            <div class="card mb-4">
              <div class="card-header">
                <h5>Service Configuration</h5>
              </div>
              <div class="card-body">
                <div class="form-group mb-3">
                  <label for="name">Service Name</label>
                  <input
                    type="text"
                    class="form-control"
                    id="name"
                    name="name"
                    required
                  />
                </div>

                <div class="row mt-3">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="basePath">Base Path</label>
                      <input
                        type="text"
                        class="form-control"
                        id="basePath"
                        name="basePath"
                        placeholder="/api/service"
                        required
                      />
                    </div>
                  </div>

                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="stripBasePath">Strip Base Path</label>
                      <select
                        class="form-control"
                        id="stripBasePath"
                        name="stripBasePath"
                      >
                        <option value="true">Yes</option>
                        <option value="false" selected>No</option>
                      </select>
                    </div>
                  </div>
                </div>

                <div class="form-group mt-3">
                  <label for="targets">Targets (one per line)</label>
                  <textarea
                    class="form-control"
                    id="targets"
                    name="targets"
                    rows="3"
                    placeholder="http://service1:8081&#10;http://service2:8081"
                    required
                  ></textarea>
                </div>

                <div class="row mt-3">
                  <div class="col-md-4">
                    <div class="form-group">
                      <label for="timeout">Timeout (seconds)</label>
                      <input
                        type="number"
                        class="form-control"
                        id="timeout"
                        name="timeout"
                        value="5"
                        min="1"
                        required
                      />
                    </div>
                  </div>

                  <div class="col-md-4">
                    <div class="form-group">
                      <label for="retryCount">Retry Count</label>
                      <input
                        type="number"
                        class="form-control"
                        id="retryCount"
                        name="retryCount"
                        value="1"
                        min="0"
                        required
                      />
                    </div>
                  </div>

                  <div class="col-md-4">
                    <div class="form-group">
                      <label for="authentication">Authentication</label>
                      <select
                        class="form-control"
                        id="authentication"
                        name="authentication"
                      >
                        <option value="true">Required</option>
                        <option value="false" selected>Not Required</option>
                      </select>
                    </div>
                  </div>
                </div>

                <div class="form-group mt-3">
                  <label for="loadBalancing">Load Balancing Strategy</label>
                  <select
                    class="form-control"
                    id="loadBalancing"
                    name="loadBalancing"
                  >
                    <option value="round-robin" selected>Round Robin</option>
                    <option value="random">Random</option>
                    <option value="weighted">Weighted</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="mt-4">
              <button type="submit" class="btn btn-primary">Add Service</button>
              <a href="/admin/dashboard" class="btn btn-secondary">Cancel</a>
            </div>
          </form>
    </div>
  </div>
{{end}}

{{define "scripts"}}
<!-- HTMX event handlers already in ui.js -->
{{end}}
